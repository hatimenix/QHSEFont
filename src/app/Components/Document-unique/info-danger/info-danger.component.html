<div class="content-page">
    <div class="container-fluid">
       <div class="row">
          <div class="col-sm-12">
            
             <div class="card">
                <div class="card-header d-flex justify-content-between">
                   <div class="header-title">
                      <h4 class="card-title">Document unique</h4>
                   </div>
                </div>
                <div class="card-body">
                   <div class="iq-example-row">
                      <div class="container-fluid">
                         <ul class="nav nav-pills mb-3 nav-fill" id="pills-tab-1" role="tablist">
                            <li class="nav-item col-6 col-md-4">
                               <a class="nav-link active" id="pills-home-tab-fill" data-toggle="pill" href="#pills-home-fill" role="tab" aria-controls="pills-home" aria-selected="true">INFORMATION GENERALES</a>
                            </li>
                            <li class="nav-item col-6 col-md-4">
                               <a class="nav-link" id="pills-profile-tab-fill" data-toggle="pill" href="#pills-profile-fill" role="tab" aria-controls="pills-profile" aria-selected="false">ANALYSE DE L'EVENEMENT</a>
                            </li>
                            <li class="nav-item col-6 col-md-4">
                               <a class="nav-link" id="pills-contact-tab-fill" data-toggle="pill" href="#pills-contact-fill" role="tab" aria-controls="pills-contact" aria-selected="false">PLAN D'ACTIONS</a>
                            </li>
                         </ul>
                         <div class="tab-content" id="pills-tabContent-1">
                            <div class="tab-pane fade show active" id="pills-home-fill" role="tabpanel" aria-labelledby="pills-home-tab-fill">
                                <div class="card-body">
                                    <div id="table" class="table-editable">
                                       <table class="table table-bordered table-responsive-md table-striped text-center">
                                          <tbody>
                                             <tr>
                                                <td style="width:30%">Site</td>
                                                <td style="width:70%">{{ this.siteName }}</td>
                                             </tr>
                                             <tr>
                                                <td style="width:30%">Service</td>
                                                <td style="width:70%">{{ this.serviceName }}</td>
                                             </tr>
                                             <tr>
                                                <td style="width:30%">Poste de travail</td>
                                                <td style="width:70%">{{ danger.poste_de_travail }}</td>
                                             </tr>
                                             <tr>
                                                <td style="width:30%">Tache / situation analysée</td>
                                                <td style="width:70%">{{ danger.taches }}</td>
                                             </tr>
                                             <tr>
                                                <td style="width:30%">Famille de danger</td>
                                                <td style="width:70%">{{ this.familleName }}</td>
                                             </tr>
                                             <tr>
                                                <td style="width:30%">Description du danger</td>
                                                <td style="width:70%">{{ danger.description }}</td>
                                             </tr>
                                             <tr>
                                                <td style="width:30%">Conséquences courantes</td>
                                                <td style="width:70%">{{ danger.consequences }}</td>
                                             </tr>
                                          </tbody>
                                       </table>
                                    </div>
                                 </div>
                            </div>
                            <div class="tab-pane fade" id="pills-profile-fill" role="tabpanel" aria-labelledby="pills-profile-tab-fill">
                              <div id="table" class="table-editable">
                                <span class="table-add float-left mb-3 mr-2">
                                    <h6>Historique des évaluations</h6>
                                </span>
                                 <table class="table table-bordered table-responsive-md table-striped text-center">
                                    <tbody>
                                       <tr>
                                            <td style="width:20%">Evaluation(s)</td>
                                            <td style="width:80%">
                                                <table class="table table-bordered table-responsive-md table-striped text-center">
                                                <tbody>
                                                <tr>
                                                    <th>Date evaluation</th>
                                                    <th>Gravité</th>
                                                    <th>Probabilité</th>
                                                    <th>Mesures de prévention en place</th>
                                                    <th>IPR</th>
                                                    <th>Indice rique</th>
                                                </tr>
                                                <tr *ngIf="(evaluations$ | async)?.length === 0">
                                                   <td colspan="7">Aucune évaluation enregistré pour ce danger.</td>
                                                 </tr>
                                                <tr *ngFor="let evaluation of evaluations$ | async">
                                                    <td>{{ evaluation.date }}</td>
                                                    <td>{{ evaluation.severite }}</td>
                                                    <td>{{ evaluation.probabilite }}</td>
                                                    <td>{{ evaluation.mesure_prevention }}</td>
                                                    <td>{{ evaluation.ipr }}</td>
                                                    <td>{{ evaluation.indice_risque }}</td>
                                                </tr>
                                                </tbody>
                                                </table>
                                            </td>
                                       </tr>
                                    </tbody>
                                 </table>
                              </div>
                              <div id="table" class="table-editable">
                                <span class="table-add float-left mb-3 mr-2">
                                    <h6>Historique des accidents relatifs à ce danger</h6>
                                </span>
                                <table class="table table-bordered table-responsive-md table-striped text-center">
                                    <tbody>
                                       <tr>
                                            <td style="width:20%">Accidents associés</td>
                                            <td style="width:80%">
                                                <table class="table table-bordered table-responsive-md table-striped text-center">
                                                <tbody>
                                                <tr>
                                                    <th>Modifier</th>
                                                    <th>Intitulé de l'évènement</th>
                                                    <th>Site</th>
                                                    <th>Type d'évènement</th>
                                                    <th>Date accident</th>
                                                    <th>Arret de travail</th>
                                                    <th>Nom de la personne</th>
                                                </tr>
                                                <tr *ngIf="(evenements$ | async)?.length === 0">
                                                   <td colspan="7">Aucun événement enregistré pour ce danger.</td>
                                                 </tr>
                                                <tr *ngFor="let evenement of evenements$ | async">
                                                    <td>test</td>
                                                    <td>{{ evenement.intitule }}</td>
                                                    <td>{{ evenement.Site_name }}</td>
                                                    <td>{{ evenement.type_evenement }}</td>
                                                    <td>{{ evenement.date_accident }}</td>
                                                    <td>hgffhj</td>
                                                    <td>{{ evenement.nom_personne }}</td>
                                                </tr>
                                                </tbody>
                                                </table>
                                            </td>
                                       </tr>
                                    </tbody>
                                 </table>
                              </div>
                            </div>
                            <div class="tab-pane fade" id="pills-contact-fill" role="tabpanel" aria-labelledby="pills-contact-tab-fill">
                              <div id="table" class="table-editable">
                                 <table class="table table-bordered table-responsive-md table-striped text-center">
                                    <tbody>
                                       <tr>
                                          <td style="width:20%">Source</td>
                                          <td style="width:80%">Document Unique</td>
                                       </tr>
                                       <tr>
                                          <td style="width:20%">Action(s) associée(s)</td>
                                          <td style="width:80%">
                                             <table class="table table-bordered table-responsive-md table-striped text-center">
                                                <tbody>
                                                <tr>
                                                    <th>Modifier</th>
                                                    <th>Intitulé action</th>
                                                    <th>Domaine</th>
                                                    <th>Origine de l'action</th>
                                                    <th>Site</th>
                                                    <th>Etat</th>
                                                    <th>Assigné à</th>
                                                    <th>Date mise en oeuvre</th>
                                                    <th>Année</th>
                                                    <th>Priorité</th>
                                                    <th>Référence action</th>
                                                </tr>
                                                <tr *ngIf="(actions$ | async)?.length === 0">
                                                   <td colspan="11">Aucune action enregistré pour ce danger.</td>
                                                 </tr>
                                                <tr *ngFor="let actions of actions$ | async">
                                                    <td>{{ actions.intitule }}</td>
                                                    <td>{{ actions.domaine }}</td>
                                                    <td>{{ actions.origine_action }}</td>
                                                    <td>{{ actions.Site_name }}</td>
                                                    <td>Non commencer</td>
                                                    <td>{{ actions.assigne_a }}</td>
                                                    <td>{{ actions.delai_mise_en_oeuvre }}</td>
                                                    <td>{{ actions.assigne_a }}</td>
                                                    <td>2023</td>
                                                    <td>{{ actions.priorite }}</td>
                                                    <td>{{ actions.reference }}</td>
                                                </tr>
                                                </tbody>
                                                </table>
                                          </td>
                                       </tr>
                                    </tbody>
                                 </table>
                              </div>
                            </div>
                         </div>
                      </div>
                   </div>
                </div>
             </div>
       </div>
    </div>
    </div>
    
    